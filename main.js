let setRoundProgress = () => { for (i of $(".circle-bar")) { let t = $(i).find(".mask .percent"); if (t.text().includes("NaN")) t.text("0%"); else { let e = parseInt(t.text()), s = $(i).css("background-color"); e <= 50 ? $(i).find(".circle-bar-right").css("transform", `rotate(${10 * e}deg)`) : ($(i).find(".circle-bar-right").css({ transform: "rotate(0deg)", "background-color": s }), $(i).find(".circle-bar-left").css("transform", `rotate(${3.6 * (e - 50)}deg)`)) } } }; $((function () { let t = {}; function e(e) { let s = $(e).val(), c = t => { let e = t.attr("class"); return e && e.split().includes("chosen") ? t.attr("click-type") : null }, r = [t[c($(".dropdownContent p[click-type='1.12']"))], t[c($(".dropdownContent p[click-type='1.16']"))], t[c($(".dropdownContent p[click-type='1.17']"))]]; $(".output").html(""); let n = 0; if (s) for (i of r) i && Object.keys(i).map((t => { ++n > 50 || (t.includes(s) || i[t].ModID.includes(s)) && $(".output").append(` <div><div>${t}: ${i[t].ModID}</div><div class="circle-bar"><div class="circle-bar-left"></div><div class="circle-bar-right"></div><div class="mask"><span class="percent">${parseInt(i[t].Progress)}%</span></div></div></div>`) })); else for (i of r) i && Object.keys(i).map((t => { if (++n > 10) return $(".output").append(` <div><div>${t}: ${i[t].ModID}</div><div class="circle-bar"><div class="circle-bar-left"></div><div class="circle-bar-right"></div><div class="mask"><span class="percent">${parseInt(i[t].Progress)}%</span></div></div></div>`) })); $(".output").html().length < 0 && $(".output").html("ç„¡"), setRoundProgress() } ["1.12", "1.16", "1.17"].map((e => { $.getJSON(`https://raw.githubusercontent.com/RPMTW/RPMTW-website-data/main/data/CrowdinIndex-${e}.json`, (i => { t[e] = i })) })), $(document).on("keyup", (function (t) { 13 === t.keyCode && e($("#search")) })), $(".dropdownContent").on("click", "p", (function () { $(this).toggleClass("chosen") })), $("#search").on("change", (function () { e(this) })) }));